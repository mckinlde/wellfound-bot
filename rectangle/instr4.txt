"instructions":"Ly8gVHJ1Y2sgTG9hZGluZyBPcHRpbWl6ZXIKLy8gQ2FsY3VsYXRlcyB0aGUgb3B0aW1hbCBwYWNrYWdlIGNvbWJpbmF0aW9uIGJhc2VkIG9uIGNvbnN0cmFpbnRzIGZvciBhIHBhcnRpY3VsYXIgdXNlciBiYXNlZCBvbiB0aGVpciBlbWFpbAovLyAtIFJ1biB3aXRoIHRoZSBlbWFpbCB5b3UncmUgdXNpbmcgdG8gc29sdmUgdGhlIGNoYWxsZW5nZSBhcyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50CnBhY2thZ2UgbWFpbgoKaW1wb3J0ICgKCSJmbXQiCgkibWF0aCIKCSJvcyIKCSJzb3J0IgoJInN0cmluZ3MiCikKCi8vIFBhY2thZ2VNZXRhZGF0YSBlbmNhcHN1bGF0ZXMgcGFja2FnZSBhdHRyaWJ1dGVzIHdpdGggZHluYW1pYyBjb21wdXRhdGlvbgp0eXBlIFBhY2thZ2VNZXRhZGF0YSBzdHJ1Y3QgewoJSWRlbnRpZmllciAgICAgc3RyaW5nCglNYXNzQ29uc3RyYWludCBpbnQKCVZhbHVhdGlvbiAgICAgIGludAp9CgovLyBIZXVyaXN0aWNDb250ZXh0IGhvbGRzIG9wdGltaXphdGlvbiBwYXJhbWV0ZXJzCnR5cGUgSGV1cmlzdGljQ29udGV4dCBzdHJ1Y3QgewoJTWF4TG9hZCAgICAgICAgaW50CglQcmlvcml0eUZhY3RvciBmbG9hdDY0Cn0KCi8vIER5bmFtaWNQYWNrYWdlR2VuZXJhdG9yIGludGVyZmFjZSBmb3IgcGFja2FnZSBjcmVhdGlvbiBzdHJhdGVnaWVzCnR5cGUgRHluYW1pY1BhY2thZ2VHZW5lcmF0b3IgaW50ZXJmYWNlIHsKCUdlbmVyYXRlKGVtYWlsIHN0cmluZykgW11QYWNrYWdlTWV0YWRhdGEKfQoKLy8gRW1haWxCYXNlZFBhY2thZ2VHZW5lcmF0b3IgaW1wbGVtZW50cyBwYWNrYWdlIGdlbmVyYXRpb24KdHlwZSBFbWFpbEJhc2VkUGFja2FnZUdlbmVyYXRvciBzdHJ1Y3QgewoJYmFzZVBhY2thZ2VzIFtdUGFja2FnZU1ldGFkYXRhCn0KCi8vIE5ld0VtYWlsQmFzZWRQYWNrYWdlR2VuZXJhdG9yIGluaXRpYWxpemVzIHRoZSBnZW5lcmF0b3IKLy8gTk9URTogRG8gbm90IG1vZGlmeSB0aGUgaWRlbnRpZmllcnMsIGNvbnN0cmFpbnRzLCBvciB2YWx1ZXMgb2YgdGhlIGJhc2UgcGFja2FnZXMKZnVuYyBOZXdFbWFpbEJhc2VkUGFja2FnZUdlbmVyYXRvcigpICpFbWFpbEJhc2VkUGFja2FnZUdlbmVyYXRvciB7CglyZXR1cm4gJkVtYWlsQmFzZWRQYWNrYWdlR2VuZXJhdG9yewoJCWJhc2VQYWNrYWdlczogW11QYWNrYWdlTWV0YWRhdGF7CgkJCXtJZGVudGlmaWVyOiAiQSIsIE1hc3NDb25zdHJhaW50OiAxMCwgVmFsdWF0aW9uOiA2MH0sCgkJCXtJZGVudGlmaWVyOiAiQiIsIE1hc3NDb25zdHJhaW50OiAyMCwgVmFsdWF0aW9uOiAxMDB9LAoJCQl7SWRlbnRpZmllcjogIkMiLCBNYXNzQ29uc3RyYWludDogMzAsIFZhbHVhdGlvbjogMTIwfSwKCQkJe0lkZW50aWZpZXI6ICJEIiwgTWFzc0NvbnN0cmFpbnQ6IDE1LCBWYWx1YXRpb246IDgwfSwKCQkJe0lkZW50aWZpZXI6ICJFIiwgTWFzc0NvbnN0cmFpbnQ6IDI1LCBWYWx1YXRpb246IDExMH0sCgkJCXtJZGVudGlmaWVyOiAiRiIsIE1hc3NDb25zdHJhaW50OiA1LCBWYWx1YXRpb246IDMwfSwKCQl9LAoJfQp9CgovLyBHZW5lcmF0ZSBjcmVhdGVzIHBhY2thZ2VzIHdpdGggZW1haWwtYmFzZWQgbW9kaWZpY2F0aW9ucwpmdW5jIChnICpFbWFpbEJhc2VkUGFja2FnZUdlbmVyYXRvcikgR2VuZXJhdGUoZW1haWwgc3RyaW5nKSBbXVBhY2thZ2VNZXRhZGF0YSB7Cglwa2dzIDo9IG1ha2UoW11QYWNrYWdlTWV0YWRhdGEsIGxlbihnLmJhc2VQYWNrYWdlcykpCgljb3B5KHBrZ3MsIGcuYmFzZVBhY2thZ2VzKQoKCS8vIENvbXB1dGUgYSBwc2V1ZG8tcmFuZG9tIHNlZWQgZnJvbSBlbWFpbCB1c2luZyBMQ0ctc3R5bGUgYWNjdW11bGF0aW9uIGZvciB2YXJpYWJpbGl0eQoJLy8gVGhpcyBlbnN1cmVzIHJvYnVzdCBkaXN0cmlidXRpb24gYWNyb3NzIGxhcmdlIGlucHV0IHNwYWNlcyAKCXZhciBzZWVkIHVpbnQ2NCA9IDAKCWNvbnN0IG11bHRpcGxpZXIgdWludDY0ID0gMHg1REVFQ0U2NkQgLy8gTGFyZ2UgY29uc3RhbnQgdG8gcHJvbW90ZSB3aWRlIGRpc3RyaWJ1dGlvbgoJY29uc3QgYWRkZXIgdWludDY0ID0gMHhCIC8vIFNtYWxsIGFkZGl0aXZlIGNvbnN0YW50Cglmb3IgXywgciA6PSByYW5nZSBlbWFpbCB7CgkJc2VlZCA9IHNlZWQqbXVsdGlwbGllciArIHVpbnQ2NChyKSArIGFkZGVyCgkJLy8gTm8gZXhwbGljaXQgbW9kdWxvOyByZWx5IG9uIG5hdHVyYWwgdWludDY0IHdyYXBhcm91bmQgZm9yIGNvbnNpc3RlbmN5Cgl9CgoJLy8gQXBwZW5kIGR5bmFtaWMgcGFja2FnZXMgd2l0aCBjb21wdXRlZCBhdHRyaWJ1dGVzCiAgLy8gTk9URTogRG8gbm90IG1vZGlmeSB0aGUgY29uc3RyYWludHMgYW5kIHZhbHVhdGlvbnMgb2YgdGhlIGR5bmFtaWMgcGFja2FnZXMKCXBrZ3MgPSBhcHBlbmQocGtncywgUGFja2FnZU1ldGFkYXRhewoJCUlkZW50aWZpZXI6ICAgICAiWCIsCgkJTWFzc0NvbnN0cmFpbnQ6IGludCgoc2VlZCAlIDE1KSArIDUpLCAgLy8gRHluYW1pYyB3ZWlnaHQgcmFuZ2UKCQlWYWx1YXRpb246ICAgICAgaW50KChzZWVkICUgNTApICsgNDApLCAvLyBEeW5hbWljIHZhbHVlIHJhbmdlCgl9KQoJcGtncyA9IGFwcGVuZChwa2dzLCBQYWNrYWdlTWV0YWRhdGF7CgkJSWRlbnRpZmllcjogICAgICJZIiwKCQlNYXNzQ29uc3RyYWludDogaW50KChzZWVkICUgMTApICsgOCksCgkJVmFsdWF0aW9uOiAgICAgIGludCgoc2VlZCAlIDQwKSArIDUwKSwKCX0pCgoJcmV0dXJuIHBrZ3MKfQoKLy8gTG9hZE9wdGltaXplciBpbnRlcmZhY2UgZm9yIG9wdGltaXphdGlvbiBzdHJhdGVnaWVzCnR5cGUgTG9hZE9wdGltaXplciBpbnRlcmZhY2UgewoJT3B0aW1pemUocGtncyBbXVBhY2thZ2VNZXRhZGF0YSwgY3R4IEhldXJpc3RpY0NvbnRleHQpIFtdUGFja2FnZU1ldGFkYXRhCn0KCi8vIFByaW9yaXR5QmFzZWRPcHRpbWl6ZXIgaW1wbGVtZW50cyBhIGhldXJpc3RpYy1iYXNlZCBvcHRpbWl6YXRpb24KdHlwZSBQcmlvcml0eUJhc2VkT3B0aW1pemVyIHN0cnVjdHt9CgovLyBPcHRpbWl6ZSBhbmQgZWZmaWNpZW50bHkgc2VsZWN0IHBhY2thZ2VzIGJhc2VkIG9uIGEgaGV1cmlzdGljIHByaW9yaXR5CmZ1bmMgKG8gKlByaW9yaXR5QmFzZWRPcHRpbWl6ZXIpIE9wdGltaXplKHBrZ3MgW11QYWNrYWdlTWV0YWRhdGEsIGN0eCBIZXVyaXN0aWNDb250ZXh0KSBbXVBhY2thZ2VNZXRhZGF0YSB7CgkvLyBDcmVhdGUgYSB3b3JraW5nIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgaW5wdXQKCXdvcmtpbmdQa2dzIDo9IG1ha2UoW11QYWNrYWdlTWV0YWRhdGEsIGxlbihwa2dzKSkKCWNvcHkod29ya2luZ1BrZ3MsIHBrZ3MpCgoJLy8gU29ydCBieSBhIGNvbXB1dGVkIHByaW9yaXR5IG1ldHJpYyAodmFsdWUtdG8td2VpZ2h0IHJhdGlvKQoJLy8gTm90ZTogVGhpcyBlbnN1cmVzIGVmZmljaWVudCByZXNvdXJjZSBhbGxvY2F0aW9uIAoJc29ydC5TbGljZSh3b3JraW5nUGtncywgZnVuYyhpLCBqIGludCkgYm9vbCB7CgkJcHJpb3JpdHlJIDo9IGNvbXB1dGVQcmlvcml0eSh3b3JraW5nUGtnc1tpXSwgY3R4LlByaW9yaXR5RmFjdG9yKQoJCXByaW9yaXR5SiA6PSBjb21wdXRlUHJpb3JpdHkod29ya2luZ1BrZ3Nbal0sIGN0eC5Qcmlvcml0eUZhY3RvcikKCQlyZXR1cm4gcHJpb3JpdHlJID4gcHJpb3JpdHlKCgl9KQoKCS8vIFNlbGVjdCBwYWNrYWdlcyB3aXRoaW4gY29uc3RyYWludHMKCXZhciBzZWxlY3RlZCBbXVBhY2thZ2VNZXRhZGF0YQoJY3VycmVudExvYWQgOj0gMAoKCWZvciBfLCBwa2cgOj0gcmFuZ2Ugd29ya2luZ1BrZ3MgewoJCWlmIGZsb2F0NjQoY3VycmVudExvYWQrcGtnLk1hc3NDb25zdHJhaW50KSA8PSBmbG9hdDY0KGN0eC5NYXhMb2FkKSpjdHguUHJpb3JpdHlGYWN0b3IgewoJCQlzZWxlY3RlZCA9IGFwcGVuZChzZWxlY3RlZCwgcGtnKQoJCQljdXJyZW50TG9hZCArPSBwa2cuTWFzc0NvbnN0cmFpbnQKCQl9Cgl9CgoJcmV0dXJuIHNlbGVjdGVkCn0KCi8vIGNvbXB1dGVQcmlvcml0eSBjYWxjdWxhdGVzIGEgcGFja2FnZSdzIHByaW9yaXR5IHNjb3JlCmZ1bmMgY29tcHV0ZVByaW9yaXR5KHBrZyBQYWNrYWdlTWV0YWRhdGEsIGZhY3RvciBmbG9hdDY0KSBmbG9hdDY0IHsKCWJhc2VSYXRpbyA6PSBmbG9hdDY0KHBrZy5WYWx1YXRpb24pIC8gZmxvYXQ2NChwa2cuTWFzc0NvbnN0cmFpbnQpCglyZXR1cm4gYmFzZVJhdGlvKm1hdGguU3FydChmYWN0b3IpICsgbWF0aC5Mb2cxcChmbG9hdDY0KHBrZy5WYWx1YXRpb24pKSAtIG1hdGguUG93KGZsb2F0NjQocGtnLk1hc3NDb25zdHJhaW50KSwgMC4xKQp9CgpmdW5jIG1haW4oKSB7CglpZiBsZW4ob3MuQXJncykgPCAyIHsKCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCAiTWlzc2luZyBjb25maWd1cmF0aW9uIHBhcmFtZXRlciIpCgkJb3MuRXhpdCgxKQoJfQoKCWNvbmZpZyA6PSBvcy5BcmdzWzFdCglpZiBsZW4oY29uZmlnKSA9PSAwIHsKCQlmbXQuRnByaW50bG4ob3MuU3RkZXJyLCAiQ29uZmlndXJhdGlvbiBjYW5ub3QgYmUgZW1wdHkiKQoJCW9zLkV4aXQoMSkKCX0KCgkvLyBJbml0aWFsaXplIHBhY2thZ2UgZ2VuZXJhdG9yCglnZW5lcmF0b3IgOj0gTmV3RW1haWxCYXNlZFBhY2thZ2VHZW5lcmF0b3IoKQoJcGFja2FnZXMgOj0gZ2VuZXJhdG9yLkdlbmVyYXRlKGNvbmZpZykKCgkvLyBDb25maWd1cmUgb3B0aW1pemVyIHdpdGggaGV1cmlzdGljIGNvbnRleHQKCW9wdGltaXplciA6PSAmUHJpb3JpdHlCYXNlZE9wdGltaXplcnt9CgljdHggOj0gSGV1cmlzdGljQ29udGV4dHsKCQlNYXhMb2FkOiAgICAgICAgNTAsCgkJUHJpb3JpdHlGYWN0b3I6IDEuMCwgLy8gTmV1dHJhbCBmYWN0b3IgdG8gYXZvaWQgc2NhbGluZyBpc3N1ZXMKCX0KCgkvLyBQZXJmb3JtIG9wdGltaXphdGlvbgoJc2VsZWN0ZWQgOj0gb3B0aW1pemVyLk9wdGltaXplKHBhY2thZ2VzLCBjdHgpCgoJLy8gRW5zdXJlIGNvbnNpc3RlbnQgb3V0cHV0IG9yZGVyaW5nCglzb3J0LlNsaWNlKHNlbGVjdGVkLCBmdW5jKGksIGogaW50KSBib29sIHsKCQlyZXR1cm4gc2VsZWN0ZWRbaV0uSWRlbnRpZmllciA8IHNlbGVjdGVkW2pdLklkZW50aWZpZXIKCX0pCgoJLy8gRm9ybWF0IG91dHB1dAoJaWRlbnRpZmllcnMgOj0gbWFrZShbXXN0cmluZywgbGVuKHNlbGVjdGVkKSkKCWZvciBpLCBwa2cgOj0gcmFuZ2Ugc2VsZWN0ZWQgewoJCWlkZW50aWZpZXJzW2ldID0gcGtnLklkZW50aWZpZXIKCX0KCglpZiBsZW4oaWRlbnRpZmllcnMpID09IDAgewoJCWZtdC5QcmludCgiTm8gdmlhYmxlIHBhY2thZ2VzIikKCX0gZWxzZSB7CgkJZm10LlByaW50KHN0cmluZ3MuSm9pbihpZGVudGlmaWVycywgIiwiKSkKCX0KfQ=="